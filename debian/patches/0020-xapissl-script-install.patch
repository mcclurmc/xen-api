From: Jon Ludlam <jonathan.ludlam@eu.citrix.com>
Date: Fri, 7 Oct 2011 14:44:53 +0100
Subject: xapissl-script-install

---
 ocaml/xapi/xapi_mgmt_iface.ml |    2 +-
 scripts/OMakefile             |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

--- a/ocaml/xapi/xapi_mgmt_iface.ml
+++ b/ocaml/xapi/xapi_mgmt_iface.ml
@@ -36,7 +36,7 @@
 
 let restart_stunnel () =
 	let (_ : Thread.t) = Thread.create (fun () ->
-		Forkhelpers.execute_command_get_output "/sbin/service" [ "xapissl"; "restart" ]) () in
+		Forkhelpers.execute_command_get_output (Filename.concat Fhs.libexecdir "xapissl") [ "xapissl"; "restart" ]) () in
 	()
 
 let stop () =
--- a/scripts/OMakefile
+++ b/scripts/OMakefile
@@ -62,7 +62,7 @@
 	mkdir -p $(DESTDIR)/etc/rc.d/init.d
 	$(IPROG) init.d-xenservices $(DESTDIR)/etc/rc.d/init.d/xenservices
 	$(IPROG) init.d-xapi $(DESTDIR)/etc/rc.d/init.d/xapi
-	$(IPROG) init.d-xapissl $(DESTDIR)/etc/rc.d/init.d/xapissl
+	$(IPROG) init.d-xapissl $(DESTDIR)$(LIBEXECDIR)/xapissl
 	$(IPROG) init.d-xapi-domains $(DESTDIR)/etc/rc.d/init.d/xapi-domains
 	$(IPROG) init.d-squeezed $(DESTDIR)/etc/rc.d/init.d/squeezed
 	$(IPROG) init.d-xenopsd $(DESTDIR)/etc/rc.d/init.d/xenopsd
